# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`rustup::global`](#rustupglobal): Manage global Rust installation with `rustup`

### Defined types

* [`rustup`](#rustup): Manage a user’s Rust installation with `rustup`
* [`rustup::default`](#rustupdefault): Set default toolchain
* [`rustup::exec`](#rustupexec): Run a `rustup` command
* [`rustup::target`](#rustuptarget): Install a target for a toolchain
* [`rustup::toolchain`](#rustuptoolchain): Install a toolchain

### Resource types

* [`rustup_internal`](#rustup_internal): Manage a user’s Rust installation with `rustup`

### Functions

* [`rustup::home`](#rustuphome): Return the default home directory for a user on this OS

### Data types

* [`Rustup::OptionalStringOrArray`](#rustupoptionalstringorarray): Convenience type to make params easier to read.

## Classes

### <a name="rustupglobal"></a>`rustup::global`

By default, this uses `curl` to download the installer. Set the `$downloader`
parameter if you want to use something else.

#### Parameters

The following parameters are available in the `rustup::global` class:

* [`ensure`](#ensure)
* [`user`](#user)
* [`manage_user`](#manage_user)
* [`home`](#home)
* [`shell`](#shell)
* [`env_scripts_append`](#env_scripts_append)
* [`env_scripts_create`](#env_scripts_create)
* [`installer_source`](#installer_source)
* [`downloader`](#downloader)

##### <a name="ensure"></a>`ensure`

Data type: `Enum[present, latest, absent]`

* `present` - install rustup, but don’t update it.
* `latest` - install rustup and update it on every puppet run.
* `absent` - uninstall rustup and the tools it manages.

Default value: `present`

##### <a name="user"></a>`user`

Data type: `String[1]`

The user to own and manage rustup. We recommend not using root or any other
existing user.

Default value: `'rustup'`

##### <a name="manage_user"></a>`manage_user`

Data type: `Boolean`

Whether or not to manage `$user` user.

Default value: ``true``

##### <a name="home"></a>`home`

Data type: `String[1]`

Where to install rustup and the rust toolchains. Will contain rustup and
cargo directories.

Default value: `'/opt/rust'`

##### <a name="shell"></a>`shell`

Data type: `String[1]`

Shell for the rustup user. This can be a nologin shell.

Default value: `'/bin/bash'`

##### <a name="env_scripts_append"></a>`env_scripts_append`

Data type: `Array[Stdlib::Absolutepath]`

Scripts to append with line that sources the cargo environment script.

Default value: `['/etc/bashrc']`

##### <a name="env_scripts_create"></a>`env_scripts_create`

Data type: `Array[Stdlib::Absolutepath]`

Paths that will get links to the cargo environment script.

Default value: `['/etc/profile.d/99-cargo.sh']`

##### <a name="installer_source"></a>`installer_source`

Data type: `String[1]`

URL of the rustup installation script. Only used to set `$downloader`.

Default value: `'https://sh.rustup.rs'`

##### <a name="downloader"></a>`downloader`

Data type: `String[1]`

Command to download the rustup installation script to stdout.

Default value: `"curl -sSf ${installer_source}"`

## Defined types

### <a name="rustup"></a>`rustup`

The name should be the username.

```puppet
rustup { 'daniel': }
```

By default, this uses `curl` to download the installer. Set the `$downloader`
parameter if you want to use something else.

#### Parameters

The following parameters are available in the `rustup` defined type:

* [`ensure`](#ensure)
* [`user`](#user)
* [`home`](#home)
* [`rustup_home`](#rustup_home)
* [`cargo_home`](#cargo_home)
* [`bin`](#bin)
* [`modify_path`](#modify_path)
* [`installer_source`](#installer_source)
* [`downloader`](#downloader)

##### <a name="ensure"></a>`ensure`

Data type: `Enum[present, latest, absent]`

* `present` - install rustup, but don’t update it.
* `latest` - install rustup and update it on every puppet run.
* `absent` - uninstall rustup and the tools it manages.

Default value: `present`

##### <a name="user"></a>`user`

Data type: `String[1]`

The user to own and manage rustup.

Default value: `$name`

##### <a name="home"></a>`home`

Data type: `Stdlib::Absolutepath`

The user’s home directory. This defaults to `/home/$user` on Linux and
`/Users/$user` on macOS.

Default value: `rustup::home($user)`

##### <a name="rustup_home"></a>`rustup_home`

Data type: `Stdlib::Absolutepath`

Where toolchains are installed. Generally you shouldn’t change this.

Default value: `"${home}/.rustup"`

##### <a name="cargo_home"></a>`cargo_home`

Data type: `Stdlib::Absolutepath`

Where `cargo` installs executables. Generally you shouldn’t change this.

Default value: `"${home}/.cargo"`

##### <a name="bin"></a>`bin`

Data type: `Stdlib::Absolutepath`

Where `rustup` installs proxy executables. Generally you shouldn’t change
this.

Default value: `"${cargo_home}/bin"`

##### <a name="modify_path"></a>`modify_path`

Data type: `Boolean`

Whether or not to let `rustup` modify the user’s `PATH` in their shell init.

Default value: ``true``

##### <a name="installer_source"></a>`installer_source`

Data type: `String[1]`

URL of the rustup installation script. Only used to set `$downloader`.

Default value: `'https://sh.rustup.rs'`

##### <a name="downloader"></a>`downloader`

Data type: `String[1]`

Command to download the rustup installation script to stdout.

Default value: `"curl -sSf ${installer_source}"`

### <a name="rustupdefault"></a>`rustup::default`

The name should start with the username followed by a colon and a space, then
the toolchain. For example:

```puppet
rustup::default { 'daniel: stable': }
```

#### Parameters

The following parameters are available in the `rustup::default` defined type:

* [`user`](#user)
* [`toolchain`](#toolchain)

##### <a name="user"></a>`user`

Data type: `String[1]`

The user to install for. Automatically set if the `$name` of the resource
follows the rules above.

Default value: `(': ')[0]`

##### <a name="toolchain"></a>`toolchain`

Data type: `String[1]`

The name of the toolchain to install, e.g. "stable". Automatically set if
the `$name` of the resource follows the rules above.

Default value: `(': ')[1]`

### <a name="rustupexec"></a>`rustup::exec`

The name should start with the username followed by a colon and a space, then
the command. For example:

```puppet
rustup::exec { 'daniel: rustup default nightly': }
```

[`exec`]: https://puppet.com/docs/puppet/latest/types/exec.html

#### Parameters

The following parameters are available in the `rustup::exec` defined type:

* [`user`](#user)
* [`command`](#command)
* [`creates`](#creates)
* [`environment`](#environment)
* [`onlyif`](#onlyif)
* [`refreshonly`](#refreshonly)
* [`unless`](#unless)
* [`home`](#home)
* [`rustup_home`](#rustup_home)
* [`cargo_home`](#cargo_home)
* [`bin`](#bin)
* [`more`](#more)

##### <a name="user"></a>`user`

Data type: `String[1]`

The user to run as. Automatically set if the `$name` of the resource follows
the rules above.

Default value: `(': ')[0]`

##### <a name="command"></a>`command`

Data type: `String[1]`

The command to run, e.g. 'rustup default stable'. Automatically set if the
`$name` of the resource follows the rules above.

Default value: `(': ')[1]`

##### <a name="creates"></a>`creates`

Data type: `Optional[String[1]]`

Only run when if this path does not exist. (See [`exec`] documentation.)

Default value: ``undef``

##### <a name="environment"></a>`environment`

Data type: `Array[String[1]]`

Additional environment variables to set beyond `RUSTUP_HOME`, `CARGO_HOME`,
and `PATH`.

Default value: `[]`

##### <a name="onlyif"></a>`onlyif`

Data type: `Rustup::OptionalStringOrArray`

Only run when `$onlyif` returns success. (See [`exec`] documentation.)

Default value: ``undef``

##### <a name="refreshonly"></a>`refreshonly`

Data type: `Boolean`

Only run this when it receives an event. (See [`exec`] documentation.)

Default value: ``false``

##### <a name="unless"></a>`unless`

Data type: `Rustup::OptionalStringOrArray`

Only run when `$unless` returns failure. (See [`exec`] documentation.)

Default value: ``undef``

##### <a name="home"></a>`home`

Data type: `Stdlib::Absolutepath`

The user’s home directory. This defaults to `/home/$user` on Linux and
`/Users/$user` on macOS.

Default value: `rustup::home($user)`

##### <a name="rustup_home"></a>`rustup_home`

Data type: `Stdlib::Absolutepath`

Where toolchains are installed. Generally you shouldn’t change this.

Default value: `"${home}/.rustup"`

##### <a name="cargo_home"></a>`cargo_home`

Data type: `Stdlib::Absolutepath`

Where `cargo` installs executables. Generally you shouldn’t change this.

Default value: `"${home}/.cargo"`

##### <a name="bin"></a>`bin`

Data type: `Stdlib::Absolutepath`

Where `rustup` installs proxy executables. Generally you shouldn’t change
this.

Default value: `"${cargo_home}/bin"`

##### <a name="more"></a>`more`

Data type: `Hash[String[1], Any]`

Other parameters to pass to exec. They may override any of the other
parameters.

Default value: `{}`

### <a name="rustuptarget"></a>`rustup::target`

You can name this two ways to automatically set the parameters:

  * `"$user: $target $toolchain"`: install `$target` for `$toolchain` for
    `$user`. For example, `'daniel: x86_64-unknown-linux-gnu nightly'`.
  * `"$user: $target"`: install `$target` for the default toolchain for
    `$user`. For example: `'daniel: stable'`.

#### Parameters

The following parameters are available in the `rustup::target` defined type:

* [`ensure`](#ensure)
* [`user`](#user)
* [`target`](#target)
* [`toolchain`](#toolchain)

##### <a name="ensure"></a>`ensure`

Data type: `Enum[present, absent]`

Whether the target should be present or absent.

Default value: `present`

##### <a name="user"></a>`user`

Data type: `String[1]`

The user to install for. Automatically set if the `$name` of the resource
follows the rules above.

Default value: `(': ')[0]`

##### <a name="target"></a>`target`

Data type: `String[1]`

The name of the target to install, e.g. "sparcv9-sun-solaris". Automatically
set if the `$name` of the resource follows the rules above.

Default value: `(' ')[0]`

##### <a name="toolchain"></a>`toolchain`

Data type: `Optional[String[1]]`

The name of the toolchain in which to install the target, e.g. "stable".
`undef` means the default toolchain. Automatically set if the `$name` of the
resource follows the rules above.

Default value: `(' ')[1]`

### <a name="rustuptoolchain"></a>`rustup::toolchain`

The name should start with the username followed by a colon and a space, then
the toolchain. For example:

```puppet
rustup::toolchain { 'daniel: stable': }
```

This cannot reliably check for the presence of a toolchain. It will not
install the toolchain if another toolchain that matches `$egrep` is already
installed.

#### Parameters

The following parameters are available in the `rustup::toolchain` defined type:

* [`ensure`](#ensure)
* [`user`](#user)
* [`toolchain`](#toolchain)
* [`egrep`](#egrep)

##### <a name="ensure"></a>`ensure`

Data type: `Enum[present, absent]`

Whether the toolchain should be present or absent.

Default value: `present`

##### <a name="user"></a>`user`

Data type: `String[1]`

The user to install for. Automatically set if the `$name` of the resource
follows the rules above.

Default value: `(': ')[0]`

##### <a name="toolchain"></a>`toolchain`

Data type: `String[1]`

The name of the toolchain to install, e.g. "stable". Automatically set if
the `$name` of the resource follows the rules above.

Default value: `(': ')[1]`

##### <a name="egrep"></a>`egrep`

Data type: `String[1]`

`egrep` compatible regular expression to match the toolchain in the list.

Default value: `"^${toolchain.regsubst('-', '-(.+-)?', 'G')}"`

## Resource types

### <a name="rustup_internal"></a>`rustup_internal`

Use the [`rustup`][#rustup] defined type instead of this.

The name should be the username.

**Autorequires:** If Puppet is managing the `user` or the directories or
their parents specified as `cargo_home` and `rustup_home`, then those
resources will be autorequired.

#### Properties

The following properties are available in the `rustup_internal` type.

##### `ensure`

Valid values: `present`, `latest`, `absent`

* `present` - install `rustup`, but don’t update it.
* `latest` - install `rustup` and update it on every puppet run.
* `absent` - uninstall `rustup` and the tools it manages.

Default value: `present`

#### Parameters

The following parameters are available in the `rustup_internal` type.

* [`cargo_home`](#cargo_home)
* [`modify_path`](#modify_path)
* [`provider`](#provider)
* [`rustup_home`](#rustup_home)
* [`user`](#user)

##### <a name="cargo_home"></a>`cargo_home`

Where `cargo` installs executables (autorequired). Generally you shouldn’t
change this.

Default value: `.cargo` in `user`’s home directory.

##### <a name="modify_path"></a>`modify_path`

Valid values: ``true``, ``false``, `yes`, `no`

Whether or not to let `rustup` modify the user’s `PATH` in their shell
init scripts. Changing this will have no effect after the initial
installation.

Default value: ``true``

##### <a name="provider"></a>`provider`

The specific backend to use for this `rustup_internal` resource. You will seldom need to specify this --- Puppet will
usually discover the appropriate provider for your platform.

##### <a name="rustup_home"></a>`rustup_home`

Where toolchains are installed (autorequired). Generally you shouldn’t
change this.

Default value: `.rustup` in `user`’s home directory.

##### <a name="user"></a>`user`

namevar

The user that owns this instance of `rustup` (autorequired).

## Functions

### <a name="rustuphome"></a>`rustup::home`

Type: Puppet Language

Return the default home directory for a user on this OS

#### `rustup::home(String[1] $user)`

Return the default home directory for a user on this OS

Returns: `Stdlib::Absolutepath` The path to the home directory.

##### `user`

Data type: `String[1]`

The name of the user.

## Data types

### <a name="rustupoptionalstringorarray"></a>`Rustup::OptionalStringOrArray`

Convenience type to make params easier to read.

Alias of

```puppet
Variant[Undef, String[1], Array[String[1]]]
```

